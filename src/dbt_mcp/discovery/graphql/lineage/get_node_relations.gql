query GetNodeRelations($environmentId: BigInt!, $uniqueId: String!) {
  environment(id: $environmentId) {
    applied {
      models(filter: { uniqueIds: [$uniqueId] }, first: 1) {
        edges {
          node {
            uniqueId
            name
            database
            schema
            alias
            resourceType
            filePath
            tags
            fqn
            parents {
              ... on ModelAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
              ... on SourceAppliedStateNestedNode {
                uniqueId
                resourceType
                name
                sourceName
              }
              ... on SeedAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
              ... on SnapshotAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
            }
            children {
              ... on ModelAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
              ... on ExposureAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
              ... on TestAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
            }
          }
        }
      }
      # Try sources
      sources(filter: { uniqueIds: [$uniqueId] }, first: 1) {
        edges {
          node {
            uniqueId
            name
            database
            schema
            sourceName
            resourceType
            filePath
            tags
            fqn
            children {
              ... on ModelAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
            }
          }
        }
      }
      # Try seeds
      seeds(filter: { uniqueIds: [$uniqueId] }, first: 1) {
        edges {
          node {
            uniqueId
            name
            database
            schema
            alias
            resourceType
            filePath
            tags
            fqn
            children {
              ... on ModelAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
            }
          }
        }
      }
      # Try snapshots
      snapshots(filter: { uniqueIds: [$uniqueId] }, first: 1) {
        edges {
          node {
            uniqueId
            name
            database
            schema
            alias
            resourceType
            filePath
            tags
            fqn
            parents {
              ... on ModelAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
              ... on SourceAppliedStateNestedNode {
                uniqueId
                resourceType
                name
                sourceName
              }
              ... on SeedAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
            }
            children {
              ... on ModelAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
              ... on ExposureAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
            }
          }
        }
      }
      # Try exposures
      exposures(filter: { uniqueIds: [$uniqueId] }, first: 1) {
        edges {
          node {
            uniqueId
            name
            resourceType
            filePath
            tags
            fqn
            parents {
              ... on ModelAppliedStateNestedNode {
                uniqueId
                resourceType
                name
              }
              ... on SourceAppliedStateNestedNode {
                uniqueId
                resourceType
                name
                sourceName
              }
            }
          }
        }
      }
    }
  }
}
